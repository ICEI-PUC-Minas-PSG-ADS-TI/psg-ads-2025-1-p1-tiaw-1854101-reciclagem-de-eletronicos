<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EcoByte - Login</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="complements/css/styleLogin.css" />
    <script src="complements/js/homeLogin.js" defer></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-white py-3">
      <div class="container">
        <a class="navbar-brand" href="home.html">
          <img src="complements/img/icone.png" alt="" width="30" height="24" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="home.html">INÍCIO</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="#">MAPA</a></li>
            <li class="nav-item">
              <a class="nav-link" href="cadastro.html">CADASTRO</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="#">PERFIL</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Conteúdo Principal (formulário de login) -->
    <main>
      <form class="form-card" id="formLogin">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required />

        <label for="password">Senha</label>
        <input type="password" id="password" name="password" required />

        <button type="submit">Entrar</button>
      </form>
    </main>

    <footer>Todos os direitos reservados</footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      document
        .getElementById("formLogin")
        .addEventListener("submit", async (event) => {
          event.preventDefault();
          const email = document
            .getElementById("email")
            .value.trim()
            .toLowerCase();
          const senha = document.getElementById("password").value.trim();

          const sucesso = await loginUser(email, senha);
          if (sucesso) {
            // Se loginUser retornou true, redireciona para home.html
            window.location.href = "home.html";
          } else {
            alert("Email ou senha inválidos");
          }
        });
    </script>
  </body>
</html>
